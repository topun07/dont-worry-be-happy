BEGIN TRANSACTION;

DROP TABLE IF EXISTS movie_genre, movie_screenwriter, genre, movie, person CASCADE;

CREATE TABLE genre (
	genre_id SERIAL PRIMARY KEY,
	name VARCHAR(50) NOT NULL
);

CREATE TABLE person (
	person_id SERIAL PRIMARY KEY,
	first_name VARCHAR(50) NOT NULL,
	last_name VARCHAR(50) NOT NULL,
	birthdate DATE NOT NULL,
	deathdate DATE NULL
);

CREATE TABLE movie (
	movie_id SERIAL PRIMARY KEY,
	title VARCHAR(100) NOT NULL,
	director_id INTEGER REFERENCES person(person_id),
	length_minutes INTEGER NOT NULL,
	release_year INTEGER NOT NULL,
	music_by_id INTEGER REFERENCES person(person_id),
	filming_country VARCHAR(50) NOT NULL
);

CREATE TABLE movie_genre (
	movie_id INTEGER REFERENCES movie(movie_id),
	genre_id INTEGER REFERENCES genre(genre_id),
	PRIMARY KEY (movie_id, genre_id)
);

CREATE TABLE movie_screenwriter (
	movie_id INTEGER REFERENCES movie(movie_id),
	screenwriter_id INTEGER REFERENCES person(person_id),
	PRIMARY KEY (movie_id, screenwriter_id)
);

INSERT INTO genre (name) 
VALUES 
    ('Drama'),
    ('Foreign'),
    ('Crime'),
    ('Comedy'),
    ('Action'),
    ('Thriller'),
    ('Music'),
    ('History'),
    ('Animation'),
    ('Sci-Fi');
  
INSERT INTO person (first_name, last_name, birthdate, deathdate) VALUES
    ('Steven', 'Spielberg', '1946-12-18', NULL),
    ('Pedro', 'Almodóvar', '1949-09-25', NULL),
    ('Bong', 'Joon-ho', '1969-09-14', NULL),
    ('Quentin', 'Tarantino', '1963-03-27', NULL),
    ('Sofia', 'Coppola', '1971-05-14', NULL),
    ('Hans', 'Zimmer', '1957-09-12', NULL),
    ('John', 'Williams', '1932-02-08', NULL),
    ('Ennio', 'Morricone', '1928-11-10', '2020-07-06'),
    ('Danny', 'Elfman', '1953-05-29', NULL),
    ('Ludwig', 'Goransson', '1984-09-01', NULL),
    ('Ang', 'Lee', '1954-10-23', NULL),
    ('Chloé', 'Zhao', '1982-03-31', NULL),
    ('Alfonso', 'Cuarón', '1961-11-28', NULL),
    ('Alejandro', 'González Iñárritu', '1963-08-15', NULL),
    ('Wong', 'Kar-wai', '1958-07-17', NULL),
    ('Pedro', 'Almodóvar', '1949-09-25', NULL),
    ('Mira', 'Nair', '1957-10-15', NULL),
    ('Mike', 'Leigh', '1943-02-20', NULL),
    ('Ridley', 'Scott', '1937-11-30', NULL),
    ('James', 'Newton Howard', '1951-06-09', NULL),
    ('Alan', 'Menken', '1949-07-22', NULL),
    ('Martin', 'Scorsese', '1942-11-17', NULL),
    ('Ingmar', 'Bergman', '1918-07-14', '2007-07-30'),
    ('Federico', 'Fellini', '1920-01-20', '1993-10-31'),
    ('Francois', 'Truffaut', '1932-02-06', '1984-10-21'),
    ('Akira', 'Kurosawa', '1910-03-23', '1998-09-06'),
    ('Michelangelo', 'Antonioni', '1912-09-29', '2007-07-30'),
    ('Nino', 'Rota', '1911-12-03', '1979-04-10'),
    ('Bernard', 'Herrmann', '1911-06-29', '1975-12-24'),
    ('John', 'Barry', '1933-11-03', '2011-01-30'),
    ('Woody', 'Allen', '1935-12-01', NULL),
    ('Mel', 'Brooks', '1926-06-28', NULL),
    ('Stanley', 'Kubrick', '1928-07-26', '1999-03-07'),
    ('William', 'Friedkin', '1935-08-29', NULL),
    ('George', 'Romero', '1940-02-04', '2017-07-16'),
    ('Dario', 'Argento', '1940-09-07', NULL);

INSERT INTO movie (title, release_year, length_minutes, filming_country, music_by_id, director_id)
VALUES
    ('Taxi Driver', 1976, 114, 'USA', 7, 22),
    ('Cries and Whispers', 1972, 91, 'Sweden', 29, 23),
    ('8 1/2', 1963, 138, 'Italy', 6, 26),
    ('The 400 Blows', 1959, 100, 'France', NULL, 25),
    ('Ran', 1985, 162, 'Japan', 20, 26),
    ('Blow-Up', 1966, 111, 'UK', 6, 27),
    ('Young Frankenstein', 1974, 106, 'USA', 30, 32),
    ('Annie Hall', 1977, 93, 'USA', 21, 31),
    ('A Clockwork Orange', 1971, 136, 'UK', 29, 33),
    ('The Exorcist', 1973, 122, 'USA', NULL, 25),
    ('The Conformist', 1970, 113, 'Italy', 6, 2),
    ('The Wages of Fear', 1953, 131, 'France', 9, 3),
    ('Persona', 1966, 85, 'Sweden', 10, 12),
    ('Battleship Potemkin', 1925, 75, 'Soviet Union', 28, 23),
    ('La Dolce Vita', 1960, 174, 'Italy', 20, 24),
    ('The Seventh Seal', 1957, 96, 'Sweden', 7, 23),
    ('Nosferatu', 1922, 94, 'Germany', 29, 26),
    ('The Bicycle Thief', 1948, 89, 'Italy', 28, 23),
    ('Amélie', 2001, 122, 'France', 7, 2),
    ('Pan''s Labyrinth', 2006, 118, 'Spain', 21, 3),
    ('A Separation', 2011, 123, 'Iran', 9, 4),
    ('The Handmaiden', 2016, 145, 'South Korea', 10, 14),
    ('Shoplifters', 2018, 121, 'Japan', 20, 17),
    ('Burning', 2018, 148, 'South Korea', 2, 3),
    ('Cold War', 2018, 89, 'Poland', 6, 18),
    ('Parasite', 2019, 132, 'South Korea', 16, 3),
    ('Portrait of a Lady on Fire', 2019, 122, 'France', 8, 16),
    ('Infernal Affairs', 2002, 101, 'Hong Kong', 11, 12),
    ('The Host', 2006, 120, 'South Korea', 13, 14),
    ('Life is Beautiful', 1997, 116, 'Italy', 20, 9),
    ('The Lives of Others', 2006, 137, 'Germany', 21, 18),
    ('The Hunt', 2012, 115, 'Denmark', 23, 17),
    ('Three Billboards Outside Ebbing, Missouri', 2017, 115, 'United States', 30, 18),
    ('All About My Mother', 1999, 101, 'Spain', 7, 16),
    ('Talk to Her', 2002, 112, 'Spain', 7, 16),
    ('The Ice Storm', 1997, 112, 'USA', 29, 12),
    ('Monsoon Wedding', 2001, 114, 'India', NULL, 17),
    ('Secrets & Lies', 1996, 142, 'UK', NULL, 18),
    ('Black Hawk Down', 2001, 144, 'USA', 29, 12),
    ('Blade Runner 2049', 2017, 164, 'Canada', 6, 22),
    ('Jaws', 1975, 124, 'USA', 7, 1),
    ('Volver', 2006, 121, 'Spain', 9, 16),
    ('Kill Bill: Vol. 1', 2003, 111, 'USA', 20, 4),
    ('Lost in Translation', 2003, 102, 'Japan', 20, 5),
    ('In the Mood for Love', 2000, 98, 'Hong Kong', 24, 15),
    ('Life of Pi', 2012, 127, 'Taiwan', 22, 1),
    ('The Grand Budapest Hotel', 2014, 99, 'Germany', 9, 2),
    ('Roma', 2018, 135, 'Mexico', 8, 13),
    ('Babel', 2006, 143, 'Morocco', 18, 14),
    ('Memories of Murder', 2003, 131, 'South Korea', NULL, 3),
    ('Crouching Tiger, Hidden Dragon', 2000, 120, 'Taiwan', 7, 11),
    ('Chungking Express', 1994, 98, 'Hong Kong', NULL, 15),
    ('The Revenant', 2015, 156, 'Canada', 10, 13),
    ('Birdman', 2014, 119, 'USA', 18, 14);

INSERT INTO movie_genre (movie_id, genre_id)
VALUES
    (1, 1), 
    (1, 6), 
    (2, 1), 
    (2, 2), 
    (3, 1), 
    (3, 2), 
    (4, 1), 
    (5, 1), 
    (5, 2), 
    (6, 1), 
    (6, 6), 
    (7, 4), 
    (8, 4), 
    (9, 3), 
    (10, 1), 
    (10, 4), 
    (11, 1), 
    (11, 2), 
    (12, 1), 
    (12, 7), 
    (13, 1), 
    (13, 2), 
    (14, 7), 
    (14, 2), 
    (15, 1), 
    (15, 2), 
    (16, 1), 
    (16, 2), 
    (17, 1), 
    (17, 6), 
    (18, 1), 
    (18, 2), 
    (19, 1), 
    (19, 4), 
    (20, 1), 
    (20, 2), 
    (21, 4), 
    (21, 3), 
    (22, 1), 
    (22, 6), 
    (23, 4), 
    (23, 1), 
    (24, 3), 
    (24, 2), 
    (25, 2), 
    (25, 1), 
    (26, 1),
    (26, 2),
    (27, 1),
    (28, 3),
    (29, 1),
    (29, 2),
    (30, 4),
    (31, 1),
    (31, 9),
    (32, 8),
    (33, 1),
    (33, 3),
    (34, 1),
    (35, 1),
    (36, 1),
    (36, 9),
    (37, 3),
    (38, 3),
    (39, 5),
    (40, 1),
    (40, 6),
    (41, 1),
    (41, 2),
    (42, 5),
    (43, 1),
    (43, 9),
    (44, 1),
    (45, 1),
    (45, 2),
    (46, 5),
    (47, 4),
    (48, 1),
    (48, 2),
    (48, 3),
    (49, 1),
    (50, 3),
    (51, 2),
    (52, 5),
    (52, 1),
    (53, 1),
    (53, 5),
    (54, 1),
    (54, 9);

INSERT INTO movie_screenwriter (movie_id, screenwriter_id) VALUES
    (1, 22), 
    (2, 23), 
    (3, 26), 
    (4, 25), 
    (5, 26), 
    (6, 27), 
    (7, 32), 
    (8, 31), 
    (9, 33), 
    (10, 25),
    (11, 2), 
    (12, 3), 
    (13, 12),
    (14, 23),
    (15, 24),
    (16, 23),
    (17, 28),
    (18, 23),
    (19, 29),
    (20, 3), 
    (21, 4), 
    (22, 14), 
    (23, 17), 
    (24, 28), 
    (25, 18), 
    (26, 3), 
    (27, 16), 
    (28, 12), 
    (29, 14), 
    (30, 22), 
    (31, 18), 
    (32, 25), 
    (33, 15), 
    (34, 30), 
    (35, 30), 
    (36, 31), 
    (37, 31), 
    (38, 5), 
    (39, 31), 
    (40, 32), 
    (41, 33), 
    (42, 33), 
    (43, 34), 
    (44, 35), 
    (45, 34),  
    (46, 5),
    (46, 16),
    (47, 16),
    (48, 18),
    (48, 16),
    (49, 4),
    (50, 5),
    (51, 15),
    (51, 2),
    (52, 12),
    (51, 12),
    (53, 11),
    (54, 11),
    (50, 11);
	
COMMIT;